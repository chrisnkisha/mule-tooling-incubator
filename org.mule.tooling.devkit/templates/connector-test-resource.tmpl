<?xml version="1.0" encoding="UTF-8"?>

<mule xmlns="http://www.mulesoft.org/schema/mule/core"
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
      xmlns:spring="http://www.springframework.org/schema/beans"
      xmlns:${moduleName}="http://www.mulesoft.org/schema/mule/${moduleName}"
      xsi:schemaLocation="
        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
        http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd
        http://www.mulesoft.org/schema/mule/${moduleName} http://www.mulesoft.org/schema/mule/${moduleName}/1.0/mule-${moduleName}.xsd">

#if($project.authenticationType == 'NONE' )
    <${moduleName}:config-type name="config" myProperty="Some string"/>
#end
#if($project.authenticationType == 'BASIC' )
    <${moduleName}:config-type name="config" myProperty="Some string" username="foo" password="foo"/>
#end
    
    <flow name="testFlow">
        <${moduleName}:my-processor config-ref="config" content="Another string"/>
    </flow>
#if($hasQuery == true )
    <flow name="testQueryFlow">
        <${moduleName}:query-processor config-ref="config" query="My Query"/>
    </flow>
#end
#if($metadataEnabled == true )
    <flow name="testAddEntiy">
        <${moduleName}:add-entity config-ref="config" key="id1">
            <${moduleName}:entity>
                <${moduleName}:entity key="Tittle">My Foo</${moduleName}:entity>
                <${moduleName}:entity key="Author">Foo</${moduleName}:entity>
            </${moduleName}:entity>
        </${moduleName}:add-entity>
    </flow>
#end
</mule>
